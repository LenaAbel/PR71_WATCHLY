<div *ngIf="isOpen" class="fixed inset-0 flex items-center justify-center z-50">
  <div class="absolute inset-0 bg-black/30 backdrop-blur-sm"></div>
  <div class="bg-(--bg-surface-1-light) dark:bg-(--bg-surface-1-dark) p-4 md:p-6 rounded-(--radius-outer) shadow-(--shadow-light) dark:shadow-(--shadow-dark) w-[90%] md:w-96 max-w-lg relative z-10 mx-4">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-bold text-(--color-main-light) dark:text-(--color-main-dark)">Rate {{ showTitle }}</h2>
      <button (click)="closePopup()" class="text-gray-500 hover:text-gray-700">✕</button>
    </div>
    
    <div class="flex justify-center gap-2 my-4 md:my-6">
      <button *ngFor="let star of stars" 
              (click)="setRating(star)"
              (mouseenter)="setHoverRating(star)"
              (mouseleave)="setHoverRating(0)"
              class="text-3xl transition-colors"
              [class.text-yellow-400]="star <= (hoverRating || selectedRating)"
              [class.text-gray-300]="star > (hoverRating || selectedRating)">
        ★
      </button>
    </div>

    <div class="flex flex-col md:flex-row justify-end gap-3 md:gap-4 mt-4 md:mt-6">
      <button (click)="closePopup()" 
              class="px-4 py-2 rounded-(--radius-inner) border border-(--bg-surface-3-light) dark:border-(--bg-surface-3-dark)">
        Cancel
      </button>
      <button (click)="submitRating()"
              [disabled]="!selectedRating"
              class="px-4 py-2 rounded-(--radius-inner) bg-(--color-main-light) dark:bg-(--color-main-dark) text-white disabled:opacity-50">
        Submit
      </button>
    </div>
  </div>
</div>
